load("//lib:write_source_files.bzl", "write_source_files")

package(
    default_visibility = ["//visibility:public"],
)

genrule(
    name = "c-desired",
    outs = ["c-desired.js"],
    cmd = "echo 'console.log(\"c*\");' > $@",
)

genrule(
    name = "f-desired",
    outs = ["f.js"],
    cmd = "echo 'console.log(\"f*\")' > $@",
)

write_source_files(
    name = "macro_smoke_test",
    additional_update_targets = [
        "//lib/tests/write_source_files/subdir/subsubdir:macro_smoke_test",
    ],
    files = {
        "c.js": ":c-desired",
    },
    suggested_update_target = "//lib/tests/write_source_files:macro_smoke_test",
)
